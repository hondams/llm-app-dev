# データモデリング

## データモデリングタスク

### 1. 概念モデリング (Conceptual Data Modeling)

**目的:** ビジネス上の主要な概念（エンティティ）と、それらの関係（リレーションシップ）を俯瞰すること。技術的な詳細は抜きにして、ビジネスルールを可視化します。

| タスク | 内容 | 成果物 |
| :--- | :--- | :--- |
| **エンティティの抽出** | システムで扱うべき「人・物・金・事」を洗い出します（例：顧客、注文、商品）。 | **エンティティ一覧** |
| **リレーションの定義** | エンティティ同士がどう関わっているかを定義します（例：顧客が注文をする）。 | **概念ER図 (High-level ERD)** |
| **用語の定義** | 言葉の揺らぎ（例：ユーザー、顧客、会員が同じか違うか）を統一します。 | **ビジネス用語集 / データ辞書（案）** |

---

### 2. 論理モデリング (Logical Data Modeling)

**目的:** 特定のデータベース（RDBなど）を意識しつつ、データの重複を排除し、整合性を保つための詳細な構造を設計すること。

| タスク | 内容 | 成果物 |
| :--- | :--- | :--- |
| **属性（アトリビュート）の定義** | 各エンティティに必要な項目をすべて洗い出します（例：名前、住所、単価）。 | **データ項目一覧** |
| **正規化 (Normalization)** | データの重複を排除し、更新異常が起きないように構造を整理します（第3正規化までが一般的）。 | **論理ER図** |
| **キーの定義** | 主キー（PK）や外部キー（FK）を特定し、データの関連性を確定させます。 | **（ER図内に記載）** |
| **制約の定義** | 必須項目（Not Null）や一意制約（Unique）などを定義します。 | **データ仕様書 / データ辞書** |

---

### 3. 物理モデリング (Physical Data Modeling)

**目的:** 使用するデータベース製品（MySQL, PostgreSQL, Oracle等）に合わせて、パフォーマンスやストレージ容量を最適化した設計を行うこと。

| タスク | 内容 | 成果物 |
| :--- | :--- | :--- |
| **データ型の決定** | 各項目に具体的なデータ型（INT, VARCHAR, TIMESTAMP等）を割り当てます。 | **テーブル定義書** |
| **インデックス設計** | 検索速度を上げるために、どのカラムにインデックスを貼るかを決めます。 | **インデックス設計書** |
| **非正規化の検討** | 性能向上のため、あえて正規化を崩してデータを冗長に持たせる判断をします。 | **（物理設計上の注釈）** |
| **パーティショニング・保存先設計** | 大規模データの場合、データの物理的な分割方法やストレージ配置を決めます。 | **物理配置図 / パラメータ設計書** |
| **DDLの作成** | 実際にDBにテーブルを作成するためのSQLを書きます。 | **DDL (SQLファイル)** |

---

### 4. 補足：データモデリングを補完するタスク

データの構造だけでなく、「データがどう使われるか」を定義するために以下のタスクも重要です。

| タスク | 内容 | 成果物 |
| :--- | :--- | :--- |
| **CRUD図の作成** | 各機能（プログラム）が、各テーブルに対して「作成(C)・参照(R)・更新(U)・削除(D)」のどれを行うかをマトリックスにします。 | **CRUDマトリックス** |
| **移行設計** | 旧システムがある場合、旧データを新構造にどう当てはめるかを設計します。 | **データ移行定義書 / マッピング表** |

---

### まとめ：成果物の流れ

1. **概念ER図**：ビジネスの全体像を把握する。
2. **論理ER図・データ辞書**：データのルールを厳密に定義する。
3. **テーブル定義書・DDL**：実装できるレベルまで詳細化する。
4. **CRUD図**：アプリケーション設計との整合性を確認する。
