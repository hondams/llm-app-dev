
### 1. 要件定義（「何を」作るかを決める）
開発の目的や、ユーザーがそのアプリで何ができるべきかを定義します。

*   **ビジネス要求:** 開発の目的、ターゲット、解決したい課題、ゴール（KPI）。
*   **機能要件:** アプリが備えるべき機能一覧（例：ログイン機能、決済機能、検索機能など）。
*   **非機能要件:** パフォーマンス（レスポンス速度）、可用性（稼働率）、セキュリティ水準、保守性、拡張性。
*   **業務フロー:** アプリを使う前後のユーザーの動きや、裏側の管理者の業務プロセス。

### 2. 外部設計 / 基本設計（「ユーザーから見える部分」を決める）
ユーザーインターフェースや、システム全体の枠組みを定義します。

*   **UI/UX設計:**
    *   **画面遷移図:** どのボタンを押すとどの画面に飛ぶか。
    *   **ワイヤーフレーム:** 各画面のレイアウト（ボタンやテキストの配置）。
    *   **デザインガイドライン:** 配色、フォント、アイコンのルール。
*   **システム構成図:** サーバー、データベース、ネットワーク、外部サービス（API）との連携図。
*   **データモデル（概念設計）:** どのようなデータを扱うか（ユーザー情報、注文情報など）。
*   **外部インターフェース設計:** 外部システムやAPIとの連携仕様。

### 3. 内部設計 / 詳細設計（「どうやって」実装するかを決める）
エンジニアがコードを書くための具体的な指示書です。

*   **データベース設計:**
    *   **ER図:** テーブル同士のリレーション（関連性）。
    *   **テーブル定義書:** カラム名、型、制約（Primary Keyなど）。
*   **API設計:** エンドポイント、リクエストパラメータ、レスポンス形式（JSON構造など）。
*   **クラス設計 / モジュール設計:** プログラムの構造、共通部品の定義。
*   **シーケンス図:** 処理の流れる順番（フロントエンド→サーバー→DBのやり取り）。
*   **状態遷移図:** 複雑なステータス（例：注文中→決済完了→発送済み）の変化。
*   **バッチ処理設計:** 定期的に実行する裏側の処理（集計処理や通知送信など）。

### 4. インフラ・運用設計
リリース後の運用を見据えた設定情報です。

*   **環境定義:** 開発・テスト・本番環境の構成。
*   **CI/CD設計:** 自動テストや自動デプロイの手順。
*   **監視・ログ設計:** エラー検知の方法、ログの保存期間。
*   **バックアップ・リカバリ設計:** 障害時にどう復旧するか。

### 5. セキュリティ設計
*   **認証・認可:** ログイン方式（OAuth, JWTなど）と権限管理。
*   **データ暗号化:** 通信の暗号化（SSL/TLS）やDBの秘匿情報の扱い。
*   **バリデーション方針:** 不正な入力をどう防ぐか。

---

### 効率的に進めるためのポイント

1.  **MVP（最小機能開発）を意識する:** 最初からすべてを詳細に設計せず、コア機能に絞って設計・開発を回す。
2.  **プロトタイプを作る:** 画面設計の段階で Figma などのツールを使い、動くイメージを共有することで手戻りを防ぐ。
3.  **ドキュメントの自動化:** API設計には Swagger (OpenAPI)、DB設計にはツールからSQLを書き出すなど、コードと設計書の乖離を防ぐ工夫をする。



## ユーザーストーリー

ユーザーストーリーを作成・定義する際に「決めるべきこと」は、単なる機能の記述にとどまりません。チームが迷わず開発に着手でき、テストが可能で、ビジネス価値を提供できる状態にする必要があります。

大きく分けて以下の**5つの要素**を定義します。

---

### 1. 基本的な3要素（WHO / WHAT / WHY）
ユーザーストーリーの標準的なテンプレートに沿って、本質的な目的を明確にします。

*   **誰が（Role）：** 誰がその機能を使うのか？（例：管理者、新規ユーザー、有料会員）
*   **何をしたいか（Action）：** どんな操作・行動をしたいか？（例：パスワードを再発行したい）
*   **なぜ、何のために（Benefit）：** それによって得られる価値は何か？（例：ログインできなくなった時に自分で解決し、サポートの手間を減らすため）

### 2. 受入条件（Acceptance Criteria: AC）
「何ができたらこのストーリーは完了（Done）と言えるのか」という具体的な判定基準です。ここが最も重要です。

*   **正常系：** 期待通りの操作をした時にどうなるか。
*   **異常系・境界値：** 間違った入力や制限を超えた時にどうなるか（例：エラーメッセージの表示）。
*   **非機能的な制約：** 応答速度やセキュリティ、デザイン上のルール（例：3秒以内に表示されること）。
*   **UI/UXの振る舞い：** どのボタンを押したらどの画面に遷移するか。

### 3. ストーリーの粒度と詳細（INVESTの確認）
良いユーザーストーリーの指標である「INVEST」を満たしているか確認し、必要なら分割します。

*   **Independent（独立性）：** 他のストーリーに依存せず、単独でリリース可能か？
*   **Negotiable（交渉可能）：** 実装方法は固定されすぎていないか？（開発チームと議論の余地があるか）
*   **Valuable（価値がある）：** ユーザーにとって明確な価値があるか？
*   **Estimable（見積り可能）：** 開発者が工数を見積もれるほど内容が明確か？
*   **Small（適切に小さい）：** 1スプリント（通常1〜2週間）以内に完了できるサイズか？
*   **Testable（テスト可能）：** 客観的に成否を判定できるか？

### 4. 補足情報・成果物
テキストだけでは伝わらない情報を紐付けます。

*   **デザイン/プロトタイプ：** Figmaやワイヤーフレームへのリンク。
*   **技術的な制約：** 使用すべきAPIや、既存システムへの影響範囲。
*   **データ定義：** 必要な入力項目や保存すべきデータ項目。

### 5. 優先順位と見積もり（メタ情報）
管理上の意思決定に必要な情報を付与します。

*   **優先順位：** ビジネス価値や緊急度に基づいた順位（Must/Should/Couldなど）。
*   **ストーリーポイント：** 相対的な見積もり（規模感）。
*   **担当者/ステータス：** 誰が担当し、現在どのフェーズ（To Do/In Progress/Testing/Done）にあるか。

---

### まとめ：チェックリスト
ユーザーストーリーを確定させる際に、以下の質問に答えられるか確認してください。

1.  [ ] **ユーザーのメリット**が書かれているか？
2.  [ ] **「完了」の定義（AC）**が具体的で、テスト可能か？
3.  [ ] **スプリント内**に終わるサイズか？
4.  [ ] チーム全員が**同じ完成イメージ**を持っているか？（会話が行われたか）

ユーザーストーリーで最も大切なのは、ドキュメントを完璧にすることではなく、**「チーム内での対話（Conversation）」を通じて認識を合わせること**です。


## ユースケース

ユースケースを定義する際に「決めるべきこと（定義すべき項目）」は、大きく分けて**「基本要素」「シナリオ（流れ）」「条件・ルール」**の3つのカテゴリに分類できます。

これらを明確にすることで、開発者とユーザー（顧客）の間で「システムが何をすべきか」の認識合わせがスムーズになります。

---

### 1. 基本要素（誰が・何を）
まずは、そのユースケースの全体像を定義します。

*   **ユースケース名：**
    *   「～する」という動詞で終わる簡潔な名前にします。（例：商品を購入する、パスワードを再設定する）
*   **アクター（Actor）：**
    *   システムを操作する人、または外部システム。「誰が」使うのかを明確にします。（例：一般会員、管理者、決済サーバー）
*   **ゴール（目的）：**
    *   そのユースケースを終えたとき、アクターが達成したいことは何か。（例：注文が完了し、在庫が減っている状態にする）
*   **範囲（スコープ）：**
    *   検討しているシステムがどこまでを担当するのか。

### 2. シナリオ（どう進むか）
システムとアクターのやり取りをステップ形式で書き出します。

*   **メインシナリオ（基本フロー）：**
    *   エラーが起きず、最もスムーズにゴールに到達する手順（ハッピーパス）。
*   **代替フロー（代替シナリオ）：**
    *   別のやり方でゴールに到達する手順。（例：カード決済ではなく銀行振込を選ぶ場合）
*   **例外フロー（例外シナリオ）：**
    *   エラーが発生した場合の挙動。（例：カードの残高不足、入力エラー、通信タイムアウト）

### 3. 条件とルール（前提と結果）
シナリオが始まる前と後の状態を定義します。

*   **事前条件：**
    *   そのユースケースを開始するために、事前に満たしておくべき状態。（例：ログイン済みであること、カートに商品が入っていること）
*   **事後条件（成功時）：**
    *   正常に終了した後のシステムの状態。（例：DBに注文データが保存される、確認メールが送信される）
*   **事後条件（失敗時）：**
    *   途中で中断した場合、どういう状態で終わるべきか。（例：課金は発生せず、入力内容は保持される）
*   **ビジネスルール：**
    *   計算式や判定ロジックなど、シナリオの中で守るべき具体的なルール。（例：クーポンは併用不可、18歳未満は購入不可など）

---

### 4. その他（必要に応じて）
プロジェクトの性質によっては、以下の項目も決めておくと手戻りが少なくなります。

*   **トリガー（起動条件）：**
    *   何がきっかけでこのユースケースが始まるか。（例：ボタンのクリック、特定の時刻になる）
*   **非機能要件のヒント：**
    *   パフォーマンスやセキュリティに関する特記事項。（例：3秒以内に応答すること、個人情報は暗号化して表示すること）
*   **UI/UXの要望：**
    *   特定の画面遷移や、ユーザーに必ず見せたいメッセージなど。

---

### 決める際のコツ
1.  **「システムが何をするか」に集中する：** 「どう実装するか（内部設計）」ではなく、「外から見てどう動くか」を記述します。
2.  **粒度（細かさ）を揃える：** あるユースケースは「ボタンを押す」レベル、別のユースケースは「業務全体」レベルだと混乱します。
3.  **ユーザー目線で書く：** 専門用語を避け、業務担当者が読んで理解できる言葉を使います。

まずは、**「誰が」「どんな目的で」「どんな手順で」**使い、**「終わった後にどうなっているか」**の4点を埋めることから始めるのがおすすめです。


## ビジネスルール

ビジネスルールとは、組織がビジネスを遂行する上での「定義」「制約」「計算の根拠」などを明文化したものです。これらを整理することで、システムの仕様変更や業務の属人化を防ぐことができます。

ビジネスルールの分類にはいくつかの手法がありますが、一般的に最も広く使われている**「構造ルール」「制約ルール（操作ルール）」「導出ルール」**の3つに分けて解説します。

---

### 1. 構造ルール（Structural Rules）
**概要:**
ビジネスで使用する「用語」や「事実（概念間の関係）」を定義するルールです。ビジネスの基盤となる「言葉の定義」を明確にします。

*   **例:** 「顧客とは、過去1年以内に購入履歴がある個人または法人を指す」「注文には必ず1つ以上の商品が含まれる」
*   **分類ごとに決めるべきこと:**
    *   **用語の定義:** その言葉が何を指し、何を指さないか（境界線）。
    *   **事実の定義:** AとBの間にどのような関係があるか（例：1人の顧客は複数の契約を持てる）。
    *   **属性:** その概念が持つべきデータ項目（例：顧客には氏名、住所、電話番号が必要）。

### 2. 制約ルール（Constraint Rules / Action Assertions）
**概要:**
「〜しなければならない」「〜してはいけない」という、業務の振る舞いや意思決定を制限するルールです。最も一般的で、システムのバリデーション（入力チェック）に直結します。

*   **例:** 「18歳未満の顧客は酒類を購入できない」「在庫が0の商品の注文は受け付けない」
*   **分類ごとに決めるべきこと:**
    *   **適用条件:** どんな時にそのルールが発動するか（トリガー）。
    *   **制限内容:** 何を禁止・強制するか。
    *   **違反時の挙動（厳格度）:** 
        *   絶対に許容しない（エラー）
        *   警告を出して進める（ワーニング）
        *   特定権限者の承認があれば許可する（オーバーライド）

### 3. 導出ルール（Derivational Rules）
**概要:**
既存の情報から新しい情報を導き出すための計算式や論理推論のルールです。

*   **例:** 「合計金額が1万円以上の場合は送料無料とする」「ポイント還元率は、会員ランクがゴールドなら5%、シルバーなら3%とする」
*   **分類ごとに決めるべきこと:**
    *   **計算式・ロジック:** どのような計算手順で結果を出すか。
    *   **ソースデータ:** 計算の元となる情報はどこから取得するか。
    *   **有効期限:** その計算ルールはいつからいつまで有効か（期間限定キャンペーンなど）。

---

### ビジネスルールを定義する際の共通ポイント

どの分類においても、以下の要素をセットで決めておくと運用の精度が高まります。

1.  **ルールの名前とID:** 管理しやすくするため。
2.  **責任者（オーナー）:** そのルールを変更する権限は誰にあるか（営業部長？法務部？）。
3.  **根拠（ソース）:** なぜそのルールがあるのか（法律、社内規定、戦略的判断など）。
4.  **変更頻度:** 頻繁に変わるもの（キャンペーン等）か、滅多に変わらないもの（税率等）か。

### まとめ表

| 分類 | 役割 | 決めるべきこと |
| :--- | :--- | :--- |
| **構造ルール** | 「定義」を決める | 用語の意味、データ間の関係性 |
| **制約ルール** | 「振る舞い」を制限する | 実行条件、禁止事項、違反時の処置 |
| **導出ルール** | 「結論」を算出する | 計算式、判定ロジック、参照データ |

ビジネスルールをこのように整理することで、システム設計がスムーズになるだけでなく、業務プロセスの可視化や法規制への対応（コンプライアンス）も容易になります。

## ビジネスルール記述技法


要件定義工程における**ビジネスルール記述技法**は、業務上の制約、計算式、意思決定のロジックなどを、プログラムコードや複雑な業務フローから切り離して、明確かつ再利用可能な形で定義するための手法です。

ビジネスルールを適切に記述することで、「仕様の属人化」を防ぎ、システムの変更柔軟性を高めることができます。

主な記述技法を「文章系」「表・図解系」「標準規格系」の3つのカテゴリに分けて解説します。

---

### 1. 文章による記述技法

最も手軽ですが、曖昧さを排除するために書き方にルールを設けるのが一般的です。

*   **RuleSpeak（ルールスピーク）**
    *   **概要:** 自然言語（日本語や英語）を使って、ルールを構造的に記述する手法。
    *   **書き方:** 「常に～しなければならない」「～してはならない」「～の場合に限り、～を許可する」といった定型句（テンプレート）を用います。
    *   **例:** 「注文合計金額が1万円以上の**場合**、配送料は**無料としなければならない**。」
*   **宣言的記述**
    *   **概要:** 「どう処理するか（How）」ではなく、「どうあるべきか（What）」を記述します。
    *   **メリット:** 手順（フロー）に依存しないため、ルールの追加や変更が容易になります。

### 2. 表・図解による記述技法

複雑な条件分岐や、状態によってルールが変わる場合に有効です。

*   **デシジョンテーブル（決定表）**
    *   **概要:** 条件（If）とアクション（Then）をマトリクス形式で整理した表。
    *   **メリット:** 条件の組み合わせの漏れや重複を視覚的にチェックできるため、最も頻繁に使われる技法です。
*   **デシジョンツリー（決定木）**
    *   **概要:** 意思決定のプロセスを樹状図で表したもの。
    *   **メリット:** 複雑な条件が段階的に適用される場合に、判断の流れを追いやすいです。
*   **状態遷移図 / 状態遷移表**
    *   **概要:** 「注文済み」「出荷待ち」「キャンセル」など、対象の状態ごとに「何ができるか（ルール）」を記述します。
    *   **例:** 「『出荷済み』の状態では、注文のキャンセルはできない」というルールを定義します。

### 3. 標準規格・モデリング技法

より厳密に、またはシステム実装を意識して定義する場合に用いられます。

*   **DMN (Decision Model and Notation)**
    *   **概要:** OMG（国際標準化団体）が策定した、意思決定のための標準表記法。
    *   **特徴:** 「意思決定要件図 (DRD)」で判断の依存関係を可視化し、詳細はデシジョンテーブル等で記述します。BPMN（業務プロセス表記法）と親和性が高いです。
*   **SBVR (Semantics of Business Vocabulary and Business Rules)**
    *   **概要:** ビジネス用語（語彙）とルールの意味論を厳密に定義するための規格。
    *   **特徴:** 「用語集」を重視し、誰が読んでも同じ意味に解釈されるようにルールを記述します。

---

### ビジネスルールを記述する際のポイント

1.  **プロセス（手順）とルールを分離する**
    *   「業務フロー（どこで何をするか）」の中に「計算式や判断基準」を書き込みすぎないことが重要です。ルールを外出しにすることで、法改正などで計算式が変わってもフロー図を修正せずに済みます。
2.  **ルールの「原子性」を保つ**
    *   1つのルールには1つの判断基準だけを含めるようにします。複合的なルールは分解して記述することで、再利用性が高まります。
3.  **用語を統一する**
    *   「顧客」「得意先」「クライアント」など、用語が揺れているとルールが曖昧になります。データ辞書や用語集を先に整備することが不可欠です。

### どの技法を選ぶべきか？

*   **単純な条件や制約:** RuleSpeak（文章）
*   **複雑な条件分岐（割引率の計算など）:** デシジョンテーブル
*   **業務プロセスと密接に関わる判断:** DMN
*   **ライフサイクルに伴う制約:** 状態遷移図

要件定義の現場では、まず**用語集**を作り、その上で**デシジョンテーブル**と**構造化された文章（RuleSpeak風）**を組み合わせて記述するのが、最も現実的で効果が高いアプローチです。


## 要件定義

- RDRA
https://www.rdra.jp/%E3%83%9B%E3%83%BC%E3%83%A0

- IPA
https://www.ipa.go.jp/archive/digital/tools/ep/ep2.html



## アーキテクチャ

- https://qiita.com/okikusan-public/items/130ff6df0411f0a58c1a

